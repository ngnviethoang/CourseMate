<script src="https://cdn.jsdelivr.net/npm/monaco-editor@0.52.2/min/vs/editor/editor.main.min.js"></script>
<link href="https://cdn.jsdelivr.net/npm/monaco-editor@0.52.2/min/vs/editor/editor.main.min.css" rel="stylesheet">

<div class="tw-grid tw-grid-cols-12 tw-gap-2 tw-bg-[#f0f0f0] tw-h-[100vh] tw-p-2">
    <!-- Left Column -->
    <p-card class="tw-col-span-5 tw-h-full px-1">
        <p-tabs value="0">
            <p-tablist>
                <p-tab value="0">
                    <p-inputicon class="pi pi-file" />
                    <span class="tw-font-bold tw-whitespace-nowrap">Description</span>
                </p-tab>
                <p-tab value="1">
                    <p-inputicon class="pi pi-history" />
                    <span class="tw-font-bold tw-whitespace-nowrap">Submissions</span>
                </p-tab>
                <p-tab value="2">
                    <p-inputicon class="pi pi-comments" />
                    <span class="tw-font-bold tw-whitespace-nowrap">Discuss</span>
                </p-tab>
            </p-tablist>

            <p-tabpanels class="py-0 px-0">
                <p-tabpanel value="0">
                    <div class="tw-h-[85vh] tw-overflow-y-auto" [innerHTML]="lessonDto.content"></div>
                </p-tabpanel>
                <p-tabpanel value="1">
                    <div class="tw-h-[85vh] tw-overflow-y-auto">
                        <p-table [value]="submissions">
                            <ng-template pTemplate="header">
                                <tr>
                                    <th>#</th>
                                    <th>Status</th>
                                    <th>Runtime</th>
                                    <th>Submitted At</th>
                                </tr>
                            </ng-template>
                            <ng-template pTemplate="body" let-sub let-i="rowIndex">
                                <tr>
                                    <td>{{ i + 1 }}</td>
                                    <td>{{ sub.status }}</td>
                                    <td>{{ sub.runtime }}</td>
                                    <td>{{ sub.time | date:'short' }}</td>
                                </tr>
                            </ng-template>
                        </p-table>
                    </div>
                </p-tabpanel>
                <p-tabpanel value="2">
                    <div class="tw-h-[85vh] tw-overflow-y-auto">
                        <p-message [(value)]="discussions"></p-message>
                    </div>
                </p-tabpanel>
            </p-tabpanels>
        </p-tabs>
    </p-card>

    <!-- Right Column -->
    <p-card class="tw-col-span-7 tw-h-full px-1">
        <!-- Toolbar -->
        <div class="tw-flex tw-items-center tw-justify-between tw-bg-white tw-p-2 tw-border-b tw-rounded-t">
            <div class="tw-flex tw-items-center tw-gap-2 tw-mb-4">
                <label for="language" class="tw-font-semibold">Language:</label>
                <p-select id="language" [options]="languages" [(ngModel)]="selectedLanguage" optionLabel="name"
                          placeholder="Select Language" />
            </div>
            <div class="tw-flex tw-gap-2">
                <p-button icon="pi pi-play" [rounded]="true" [text]="true" severity="success" (click)="runCode()" />
                <p-button icon="pi pi-refresh" [rounded]="true" [text]="true" severity="secondary"
                          (click)="resetCode()" />
            </div>
        </div>

        <!-- Editor -->
        <ngx-monaco-editor
            [options]="editorOptions"
            [(ngModel)]="code"
            style="width: 100%; height: 60vh"
        ></ngx-monaco-editor>

        <!-- Test case + Output -->
        <div class="tw-p-2 tw-bg-white tw-rounded tw-shadow">
            <h4 class="tw-font-bold mb-2">TestCase</h4>
            <p-table [value]="submissions" scrollable="true" scrollHeight="135px">
                <ng-template pTemplate="header">
                    <tr>
                        <th>#</th>
                        <th>Status</th>
                        <th>Runtime</th>
                        <th>Submitted At</th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-sub let-i="rowIndex">
                    <tr>
                        <td>{{ i + 1 }}</td>
                        <td>{{ sub.status }}</td>
                        <td>{{ sub.runtime }}</td>
                        <td>{{ sub.time | date:'short' }}</td>
                    </tr>
                </ng-template>
            </p-table>
        </div>
    </p-card>
</div>





